# D01_Linux
report about done project
## Contents
- [D01\_Linux](#d01_linux)
  - [Contents](#contents)
  - [Part 1. Установка ОС](#part-1-установка-ос)
  - [Part 2. Создание пользователя](#part-2-создание-пользователя)
  - [Part 3. Настройка сети ОС](#part-3-настройка-сети-ос)
  - [Part 4. Обновление ОС](#part-4-обновление-ос)
  - [Part 5. Использование команды **sudo**](#part-5-использование-команды-sudo)
  - [Part 6. Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)
  - [Part 7. Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)
  - [Part 8. Установка и базовая настройка сервиса **SSHD**](#part-8-установка-и-базовая-настройка-сервиса-sshd)
  - [Part 9. Установка и использование утилит **top**, **htop**](#part-9-установка-и-использование-утилит-top-htop)
  - [Part 10. Использование утилиты **fdisk**](#part-10-использование-утилиты-fdisk)
  - [Part 11. Использование утилиты **df**](#part-11-использование-утилиты-df)
  - [Part 12. Использование утилиты **du**](#part-12-использование-утилиты-du)
  - [Part 13. Установка и использование утилиты **ncdu**](#part-13-установка-и-использование-утилиты-ncdu)
  - [Part 14. Работа с системными журналами](#part-14-работа-с-системными-журналами)
  - [Part 15. Использование планировщика заданий **CRON**](#part-15-использование-планировщика-заданий-cron)

## Part 1. Установка ОС
* Для начала скачиваем _VirtualBox_ для того чтобы установить убунту на виртуальную машину.
* Скачиваем образ убунты с вебсайта [сылка на образ](https://ubuntu.com/download/server#downloads)
* Создаем виртуальную машину в _VirtualBox_ и указываем образ
* Следуем пунктам установки, создаем пользователя и перезагураем виртуалку
* Выполняем команду для просмотра версии ОС
```bash
cat /etc/issue
```
![version](img/1.png "можно увидеть установленную версию ОС")
* На скриншоте можно увидеть установленную версию ОС
## Part 2. Создание пользователя
* Создаем пользователся задавая ему группу и пароль
```bash
sudo useradd -G adm test
sudo passwd username
```
* Проверяем пользователя
```bash
cat /etc/passwd
```
![new_user](img/2.png "можно увидеть нового созданного пользователя")
* На скриншоте можно увидеть нового созданного пользователя
## Part 3. Настройка сети ОС
* Задаем название машины user-1
```bash
sudo hostnamectl set-hostname user-1
```
* Задаем нужную временную зону в интереактивном меню
```bash
sudo dpkg-reconfigure tzdata
```
![tzdata](img/3.png "меняем время")
* На скриншоте можно увидеть установку нужного времени
* Скачиваем net-tools
```bash
sudo apt-get install net-tools
```
* Вывести называния сетевых интерфейсов с помощью консольной команды
```bash
ifconfig
```
![ifconfig](img/4.png "вывод сетевых интерфейсов")
* На скриншоте можно увидеть вывод сетевых интерфейсов
* lo или же loopback – так называемая обратная петля. Нужна для того, чтоб машина не отправляла пакеты, адресованные самой себе по сети (например, если на ней стоит сервер БД), а просто возвращала обратно себе (сама она из будет обрабатывать, как пакеты, приходящие из вне
* Так же на скриншоте выше можно увидеть ip адресс полученый от DHCP сервера
* ip – 10.0.2.15 дефолтный адрес для VM. (данные из вывода команды ifconfig)
* DHCP – Dynamic Host Configuration Protocol. Или же протокол динамической конфигурации хоста. Помогает выдавать клиентам сети адреса внутри сети.
* Получаем IP адресс внешнего шлюза
```bash
wget -qO- eth0.me
```
![outer_s](img/5.png "вывод внешнего шлюза")
* Ip адресс внешнего шлюза
* Получаем IP адресс внутренего шлюза
```bash
ip route | grep default
```
![inner_s](img/6.png "вывод внутренего шлюза")
* Ip адресс внутренего шлюза
* Задать статичные настройки IP, GW, DNS
* Для начала убедимся, что до этого все задавалось не статично
```bash
ip add show
```
![not_static](img/7.png "вывод не статичных настроек")
* Вывод не статичных настроек
* Войдеи в суперпользователя
```bash
sudo -i
```
* Для того, чтоб задать статические настройки сети на машине нужно открыть файл конфигурации интерфейсов
```bash
nano /etc/netplan/00-installer-config.yaml
```
![стандартные настройки](img/8.png "вывод стандартных настроик")
* Стандартные настройки которые лежат в файле
* Установка статического адреса, маски (24 – 255.255.255.0), шлюза по умолчанию и DNS серверов

![новые настройки](img/9.png "вывод новых настроик")
* вывод новых настроик
* применяем настройки
```bash
netplan apply
```
* перезагружаем сисетму
```bash
sudo reboot
```
* Проверяем новые настройки

![новые настройки](img/10.png "вывод новых настроик")
* Новые статичные настройки
* Проверим DNS
```bash
systemd-resolve --status | grep "DNS Server"
```
![настройки днс](img/11.png "настройки днс")
* Новые настройки DNS
* Пропингуем 1.1.1.1 и ya.ru
```bash
ping 1.1.1.1
```
![Пинг по 1.1.1.1](img/12.png "Пинг по 1.1.1.1")
* Пинг по 1.1.1.1
```bash
ping ya.ru
```
![Пинг по ya.ru](img/13.png "Пинг по ya.ru")
* Пинг по ya.ru
## Part 4. Обновление ОС
* Обновить системные пакеты до последней на момент выполнения задания версии
* Обновим информацию о пакетах
```bash
sudo apt-get update
```
![Обновим информацию о пакетах](img/14.png "Обновим информацию о пакетах")
* Информация о пакетах
* Установим пакеты
```bash
sudo apt-get upgrade
```
![Установим пакеты](img/15.png "Установим пакеты")
* Пакеты установлены
## Part 5. Использование команды **sudo**
* Дадим право исполнять sudo новому пользователю которого мы создали
* Давайте посмотри есть ли сейчас у него данное право
```bash
sudo -l -U test
```
![Право на исполнение](img/16.png "Право на исполнение")
* Как видем у пользователя нету данного права
* Выдадим права пользователю
```bash
sudo usermod -aG sudo test
```
* Снова проверим право
  
![Право на исполнение](img/17.png "Право на исполнение")
* Видем что теперь у пользователя есть данное право
* sudo — это важная для понимания утилита, она позволяет временно поднимать привилегии и выполнять задачи администрирования системы. Суть в том, что в каждом дистрибутиве Linux есть пользователь root, имеющий максимальные права
* Поменять hostname от имени вновь вступившего в ряды пользователей с sudo правами
* Сначала зайдем за этого пользователя в систему
```bash
su test
```
* Что ж, давайте теперь поменяем имя машины
```bash
sudo hostnamectl set-hostname test
```
* Проверим имя машины
```bash
hostname
```
![Имя машины](img/18.png "Имя машины")
* Вот новое имя машины
## Part 6. Установка и настройка службы времени
* Настроить службу автоматической синхронизации времени. Нужно установить демона
```bash
sudo apt-get install systemd-timesyncd
```
* Сделаем его видимым
```bash
systemctl unmask systemd-timesyncd.service
```
* Включим демона
```bash
sudo timedatectl set-ntp yes
```
* Проверим время
```bash
timedatectl show
```
![Время](img/19.png "Время")
* Готово время синхронизировано
## Part 7. Установка и использование текстовых редакторов 
* Установить текстовые редакторы VIM (+ любые два по желанию)
```bash
sudo apt-get install vim
sudo apt-get install nano
sudo apt-get install mcedit
```
* Используя каждый из трех выбранных редакторов, создайте файл test_X.txt (X – название текстового редактора). Написать в нем свой никнейм и сохранить с применением изменений
* VIM
  
![VIM1](img/20.png "VIM1")
* Написали, но пока еще не сохранили. Чтоб сохранить и выйти esc → :wq
* NANO

![NANO1](img/21.png "NANO1")
* Написали, но пока еще не сохранили. Ctrl + O для сохранения и Ctrl + X для выхода
* MCEDIT

![MCEDIT1](img/22.png "MCEDIT1")
* Нажимаем F2 для сохранения и F10 для выхода
* Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений
* VIM

![VIM2](img/23.png "VIM2")
* Чтоб закрыть без сохранения изменений esc -> :q!
* NANO

![NANO2](img/24.png "NANO2")
* Чтоб закрыть без сохранения изменений Ctrl + X -> N
* MCEDIT

![MCEDIT2](img/25.png "MCEDIT2")
* Чтоб закрыть без сохранения изменений F10 и выбрать пункт No в интерактивном окне
* Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое
* VIM

![VIM3](img/26.png "VIM3")
* Чтоб найти подстроку в файле – нужно нажать на esc и написать /<word_to_find>

![VIM4](img/27.png "VIM4")
* Чтоб найти и заменить – нужно написать :%s/<word_to_find>/<word_to_change>
* NANO

![NANO3](img/28.png "NANO3")
* Чтоб найти подстроку в файле – Ctrl + W и ввести слово для поиска – как вывод – NANO просто перенесет курсор на первое пересечение

![NANO4](img/29.png "NANO4")
![NANO5](img/30.png "NANO5")
* Чтоб найти и заменить – Ctrl + \ там дальше будет окно, где нужно будет ввести меняемое на меняющее слово
* MCEDIT

![MCEDIT3](img/31.png "MCEDIT3")
* Чтоб найти подстроку в файле – F7 и ввести слово для поиска

![MCEDIT4](img/32.png "MCEDIT4")
* Чтоб найти и заменить – F4 далее вводим что изменить и на что, после его выйдет данное окно

![MCEDIT5](img/33.png "MCEDIT5")
* После замены
## Part 8. Установка и базовая настройка сервиса **SSHD**
* Установить службу SSHd
```bash
sudo apt-get install openssh-server
```
* Добавить автостарт службы при загрузке системы
```bash
sudo systemctl enable sshd
```
* Провери акивна ли служба
```bash
systemctl is-active ssh
```
* Перенастроить службу на 2022 порт
* Чтоб изменить порт SSH нужно зайти в /etc/ssh/sshd_config и раскомментировать строку с портов и поменять порт с 22 на 2022
```bash
sudo nano /etc/ssh/sshd_config
```
![ssh_port](img/34.png "ssh_port")
* Поменяли порт с 22 на 2022
* Нужно перезагрузить демон SSHd
```bash
sudo systemctl restart ssh
```
* Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи
```bash
ps aux | grep sshd
```
![ps](img/35.png "ps")
* ax – будут показаны все процессы. u — выводит пользователя и еще доп информацию. grep выводит только те строчки, где есть sshd
* Перезагрузить систему
```bash
sudo reboot
```
* Посмотрим информацию о портах
```bash
netstat -tan
```
![netstat](img/36.png "netstat")
* Видем то что порт 2022 прослушивается
* -t — вывести все tcp порты. -e — вывести все порты. -n — не будет выводить имена. IP-адрес 0.0.0.0 может использоваться на серверах для обозначения того, что служба может связываться со всеми сетевыми интерфейсами. Он дает команду серверу «прослушивать» и принимать соединения с любого IP-адреса.
## Part 9. Установка и использование утилит **top**, **htop**
* Установить и запустить утилиты top и htop
* По выводу команды top определить и написать в отчёте:
* uptime — 16 минут
* количество пользователей — 1
* загрузка системы — 0%
* количество процессов — 25
* загрузка cpu — 0%
* загрузка памяти — 147M
* pid процесса, занимающего больше всего памяти — 646
* pid процесса, занимающего больше всего процессорного времени — 542

* В отчёт вставить скрин с выводом команды htop:
* по PID

![htop pid](img/37.png "htop pid")
* Отсортировано по PID
* по CPU

![htop cpu](img/38.png "htop cpu")
* Отсортировано по PERCENT_CPU
* по памяти

![htop mem](img/39.png "htop mem")
* Отсортировано по PERCENT_MEM
* отфильтрованному для процесса sshd:

![htop sshd](img/40.png "htop sshd")
* Отфильтровано по sshd
* с процессом syslog, найденным, используя поиск:

![htop syslog](img/41.png "htop syslog")
* Найденный syslog
* с добавленным выводом hostname, clock и uptime:

![htop add](img/42.png "htop add")
* hostname, clock, uptime
## Part 10. Использование утилиты **fdisk**
* Запустить команду fdisk -l
```bash
fdisk -l
```
* Название диска: VBOX HARDDISK
* Размер диска: 10 Гигабайт
* Количество секторов: 20971520
* Размер swap: 1.5 Гигабайта
## Part 11. Использование утилиты **df** 
* Запустить команду df /
```bash
df /
```
* Размер раздела: 8408452
* Размер занятого пространства: 4273112
* Размер свободного пространства: 3686624
* Процент использования: 54%
* Единица измерения — Килобайты


* Запустить команду df -Th /
```bash
df -Th /
```
* Размер раздела: 8.1 Гигабайт
* Размер занятого пространства: 4.1 Гигабайт
* Размер свободного пространства: 3.6 Гигабайт
* Процент использования: 54%

* Тип файловой системы – ext4

## Part 12. Использование утилиты **du**
* Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
* /home

![du_home](img/43.png "du_home")
* в байтах

![du_home](img/44.png "du_home")
* в человеческих еденицах)
* /var

![du_var](img/45.png "du_var")
* в байтах

![du_var](img/46.png "du_var")
* в человеческих еденицах)
* /var/log

![du_var_log](img/47.png "du_var_log")
* в байтах

![du_var_log](img/48.png "du_var_log")
* в человеческих еденицах)
* Вывести размер всего содержимого в /var/log

![du_var_log_*](img/49.png "du_var_log_*")
* Вывод внутреностей
## Part 13. Установка и использование утилиты **ncdu**
* Установка ncdu
```bash
sudo apt-get install ncdu
```
* Вывести размер папок /home, /var, /var/log
* /home

![ncdu_home](img/50.png "ncdu_home")
* Папка /home выделена
* /var

![ncdu_var](img/51.png "ncdu_var")
* Папка /var выделена
* /var/log

![ncdu_var_log](img/52.png "ncdu_var_log")
* Папка /var/log выделена
## Part 14. Работа с системными журналами
* Открыть для просмотра журнал:
* vim /var/log/dmesg

![dmesg](img/53.png "dmesg")
* журнал dmesg
* vim /var/log/syslog

![syslog](img/54.png "syslog")
* журнал syslog
* vim /var/log/auth.log

![auth.log](img/55.png "auth.log")
* журнал auth.log
* Время последней успешной авторизации по логам 16 декабря 19:55

![auth.log_in](img/56.png "auth.log_in")
* лог об авторизации в /var/log/auth.log
* Перезапустить службу SSHd
```bash
sudo systemctl restart ssh
```
![syslog](img/57.png "syslog")
* Лог о перезапуске в /var/log/syslog
## Part 15. Использование планировщика заданий **CRON**
* Используя планировщик заданий, запустите команду uptime через каждые 2 минуты
```bash
crontab -e
```
![crontab](img/58.png "crontab")
* Добавляем в конец файла строку по запуске команды каждые 2 минуты
* Посмотрим логи /var/log/syslog как исполняеться данная команда

![crontab_log](img/59.png "crontab_log")
* Можно заметить что исполнение происходит каждые 2 минуты
* Вывести на экран список текущих заданий для CRON
```bash
crontab -l
```
![crontab_task](img/60.png "crontab_task")
* Список задач для CRON
* Удалите все задания из планировщика заданий
```bash
crontab -r
```
* Посмотрим на задачи

![crontab_task](img/61.png "crontab_task")
* Пустой CRON
